{% extends "layout.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>üìä Monthly Report</h2>
    <a href="/export_excel" class="btn btn-success">
        ‚¨á Export to Excel
    </a>
</div>

<!-- FILTER CARD -->
<div class="card shadow-sm p-3 mb-4">
    <form method="GET" class="row g-3 align-items-end">

        <div class="col-md-4">
            <label class="form-label">Month</label>
            <input name="month" value="{{ month }}" class="form-control" placeholder="MM">
        </div>

        <div class="col-md-4">
            <label class="form-label">Year</label>
            <input name="year" value="{{ year }}" class="form-control" placeholder="YYYY">
        </div>

        <div class="col-md-4">
            <button class="btn btn-primary w-100">
                Filter Report
            </button>
        </div>

    </form>
</div>

<!-- TOTAL COLLECTION CARD -->
<div class="card shadow-sm p-4 mb-4 text-center bg-light">
    <h5>Total Collection</h5>
    <h1 class="text-success">‚Çπ{{ monthly_total }}</h1>
</div>

<!-- MEMBER REPORT TABLE -->
<div class="card shadow-sm p-3">
    <h5 class="mb-3">Member Wise Report</h5>

    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>Member Name</th>
                <th>Total Amount</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>

        {% if data %}
            {% for row in data %}
            <tr>
                <td>{{ row[0] }}</td>
                <td>‚Çπ{{ row[1] }}</td>
                <td>
                    <span class="badge bg-success">
                        Calculated
                    </span>
                </td>
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="3" class="text-center text-muted">
                    No data available for selected month
                </td>
            </tr>
        {% endif %}

        </tbody>
    </table>
</div>

<br>
<a href="/dashboard" class="btn btn-secondary">‚Üê Back to Dashboard</a>

{% endblock %}